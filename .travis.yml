---
language: python

python:
  - "3.7"

services:
  - docker

env:
  global:
    - namespace="robertdebock/"
  matrix:
    - image="docker-alpine-openrc"
    - image="docker-alpine-openrc" tag="edge"
    # - namespace="archlinux/" image="base"
    - image="docker-centos-systemd" tag="7"
    - image="docker-centos-systemd"
    - image="docker-debian-systemd" tag="stable"
    - image="docker-debian-systemd" tag="unstable"
    - image="docker-debian-systemd"
    - image="docker-fedora-systemd"
    - image="docker-fedora-systemd" tag="rawhide"
    - namespace="opensuse/" image="leap"
    - image="docker-ubuntu-systemd" tag="rolling"
    - image="docker-ubuntu-systemd" tag="devel"
    - image="docker-ubuntu-systemd"

matrix:
  allow_failures:
    - env: image="docker-alpine-openrc" tag="edge"
    - env: image="docker-debian-systemd" tag="unstable"
    - env: image="docker-fedora-systemd" tag="rawhide"
    - env: image="docker-ubuntu-systemd" tag="rolling"
    - env: image="docker-ubuntu-systemd" tag="devel"

cache:
  - pip

install:
  - pip install --upgrade pip
  - pip install tox

script:
  - tox --parallel all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  slack:
    secure: "DU8pajNrHhXuhVaFNcZQ7T0CPL86CUd/ysJeyAwjt/rEWffy2mNp+bSjc1VmJG3qfypcwJHLh+z12MdYX4DFoPqmbkaC9avPirVGtMAUfsnX+CU8Aii9WESjL+qaCS0gGfQK0jIZE7/Z5sFlJleelxd0Pdkkrm7NcYAgZtPiWzefJgLNXIEUMgzdbROITPzb6+GirsTdc+XqmVWvJg/SV+Vm4RuDaNREX8pPfmEE6M2+vXprISRuTqF/1CG3Z6DpgJBjQtvld2N32qCFqadrY6RFbDlQ8t2ctIMhauF9bx9/0oiu3NCIXmKwtD8XGMkIRwQzwteAf8ikKkOn8SM7B3LtQjHlSRecrsdOLP3kWc5JadDuEDndsp99Yo192evUtrY14NqT4Y9AOKjzXB76aRHRJx//F7LtapqJlBBduCzcsSgMqLghvrCEHxo+CIF/A729ZHQtL2n/l9Jh5AOytj666rg47M5AIGWSMrYgAF01gBwHKKLBBm6BEo4UR2KT5c/OlKx/h9vSVgCTuLy5snZluiXNh8GP1ne1s4MdASmAyRU0rJJmeV2PRRT5jZegv65A4HrhepYOlvcjjNpY/fea+y279r4d9yWkZsXqQgZjGDdTCa9wLRmeNp35p00Em2uaw2h+Yy8uq+8cWUFOA+GY9o/D4ZBkwhPWn6Jrw+0="
  email: false
